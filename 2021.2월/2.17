오늘의 TIL
오늘의 목표는 Square에서 만든 Otto 라이브러리를 이용해서 event bus형태로 우리가 원하는 데이터
(클릭했을때 클릭한 내용의 x,y좌표 주소 를 받아서 원하는 엑티비티에 받은 데이터쓰기

event bus 공부내용:
3개의 Activity A,B,C가 있습니다.

이 3개의 화면은 모두 같은 데이터를 가지고 다른형태로 화면에 뿌려줍니다.
만약 데이터가 변경되는경우 3개의 Activity는 각각 화면을 갱신해주는 작업을 해줘야 합니다.
D라는 Activity(Fragment,Dialog 등)에서 데이터가 변경되는 작업이 발생할경우 A,B,C에게 변경되었다는것을 알리고 변경된 객체를 넘겨주어야 각 3개의 Activity가 변경작업을 수행할것입니다.
A,B,C에서 각각 static함수를 선언해두고 D에서는 이 3개의 static 함수를 호출하면서 해당 변경객체를 넘겨주는 형태로 구현을 합니다.
이런 코드의 단점은 static 함수안의 변수들은 모두 static으로 선언되어야하는데 Activity자신이나 Context를 사용하는경우 등과 같이 static으로 사용할수 없는 경우에 문제가 발생합니다.
또한 해당 이벤트를 받고자하는 Activity,Fragment등이 많아질경우 소스코드는 점점 복잡해지고 이해하기 어려워 집니다.

이러한 경우 EventBus Otto를 사용하면 좋습니다.

Otto의 사용방법은 아래와 같습니다.

1. 이벤트 리스너를 등록해준다(Subscriber)

2. 이벤트가 발생했을때 수행할 작업을 만들어 둔다(Subscriber)

3. 이벤트가 발생하는 위치에서 이벤트가 발생했다고 알린다(Publisher)

4. 해당 이벤트에서 원하는 변수,리스트 등을 받아서 작업을 처리한다(Subscriber)

5. 이벤트 리스너를 등록해제해준다(Subscriber)


![](https://ifh.cc/g/J4eK65.png "링크 설명(title)을 작성하세요.")


